<!-- TODO: need to test everything i've been working on. All the JS on this page, form validations, etc. Then I need to address all my TODO comments. -->

<!doctype html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="title" content="" />
    <meta name="description" content="" />
    <meta name="keyword" content="" />
    <title>Register | Breakaway Sports Ministries</title>
    <link href="reset.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Kanit" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="styles.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="images/favicon.ico" />
</head>
<body>
    <header class="mb-5">
        <nav class="main-menu shadow">
            <a class="brand ml-3" href="index.html"><img src="images/logo.png" alt="" class="w-100" /></a>
            <button id="main-menu-toggle" type="button" aria-label="Toggle main menu"></button>
            <ul class="collapsed">
                <li><a href="program.html">Program Details</a></li>
                <li><a href="philosophy.html">Our Philosophy</a></li>
                <li><a href="contact.html">Contact Us</a></li>
                <li><a href="fall_2019.html" class="orange">Fall 2019</a></li>
            </ul>
        </nav>
    </header>
    <main class="pt-4">
        <div class="container">
            <div class="row mt-4 mb-5">
                <div class="col-12">
                    <h1>Register</h1>
                </div>
                <div class="col-12">
                    <p>
                        Interested in hosting a Breakaway Sports program? We would love to hear from you! We think our program is a perfect fit for homeschool
                        groups, church youth programs, or other community groups. Please fill out the form below to request contact from our team.
                    </p>
                </div>
            </div>
            <!-- TODO: show a success message upon success -->
            <!-- <strong>Success!</strong> You've submitted your registration. We'll contact you soon. -->
            <form id="registration-form" class="validate" action="submit.html" method="post" enctype="multipart/form-data">
                <div class="row">
                    <div class="col-12">
                        <h2>Direct Contact</h2>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-8 col-lg-6">
                        <label class="d-block">
                            Name
                            <input type="text" name="name" class="form-control form-control-lg"
                                required maxlength="250">
                        </label>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 col-lg-4 mb-3">
                        <label class="d-block">
                            Email
                            <input type="email" name="email" class="form-control form-control-lg"
                                required maxlength="320">
                        </label>
                    </div>
                    <div class="col-md-4 col-lg-3 mb-3">
                        <label class="d-block">
                            Phone Number
                            <input type="tel" name="phone" class="form-control form-control-lg"
                                required minlength="7" maxlength="17">
                        </label>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12">
                        <h2>Organization Details</h2>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-6 col-lg-5">
                        <label class="d-block">
                            Organization Name
                            <input type="text" name="org-name" class="form-control form-control-lg"
                                required maxlength="250">
                        </label>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 col-lg-3 mt-3">
                        <label class="d-block">
                            City
                            <input type="text" name="city" class="form-control form-control-lg"
                                required maxlength="100">
                        </label>
                    </div>
                    <div class="col-md-2 mt-3">
                        <label class="d-block">
                            State
                            <input type="text" name="state" class="form-control form-control-lg"
                                required minlength="2" maxlength="2">
                        </label>
                    </div>
                    <div class="col-md-2 mt-3">
                        <label class="d-block">
                            Zip Code
                            <input type="text" name="zip" class="form-control form-control-lg"
                                required minlength="5" maxlength="5" pattern="[0-9]{5}">
                        </label>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-md-8 col-lg-6 mb-3">
                        <label class="d-block">
                            Approximately what is your organization&apos;s size?
                            <div class="row">
                                <div class="col-12 col-sm-6 col-xl-5">
                                    <select name="org-size" class="form-control form-control-lg"
                                        required>
                                        <option value="">-</option>
                                        <option value="Less than 200">Less than 200</option>
                                        <option value="200-500">200-500</option>
                                        <option value="More than 500">More than 500</option>
                                    </select>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12">
                        <h2>Facility Details</h2>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <label>
                            Does your organization have the facilities to run the program?
                        </label>
                    </div>
                    <div class="col-12 have-facilities-question">
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input type="radio" name="have-facilities" value="Yes" class="form-check-input" required>
                                Yes
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input type="radio" name="have-facilities" value="No" class="form-check-input" required>
                                No
                            </label>
                        </div>
                    </div>
                </div>
                <div id="facilities-details" class="mb-3 d-none">
                    <div class="row mt-3">
                        <div class="col-12">
                            <label class="d-block">
                                Please upload a photo of your facilities
                                <input type="file" name="facilities-image" class="form-control-file" multiple
                                    accept=".jpg, .jpeg, .png" data-custom-validator="validate_facility_photos"> <!-- TODO: required (add with JS) -->
                                <!-- TODO: Verify that I can upload photos taken on my iphone -->
                                <!-- TODO: add some explanatory text about max file size and supported formats -->
                            </label>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-12 col-md-10 col-lg-7">
                            <label class="d-block">
                                Please estimate the length and width of pictured facilities
                                <textarea name="facilities-desc" rows="2" class="form-control form-control-lg" maxlength="500"></textarea>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12">
                        <h2>Program Details</h2>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <label class="d-block">
                            When do you want to do the program?
                            <div class="row">
                                <div class="col-12 col-md-3">
                                    <select name="season" class="form-control form-control-lg"
                                        required>
                                        <option value="Fall">Fall</option>
                                        <option value="Winter">Winter</option>
                                        <option value="Spring">Spring</option>
                                        <option value="Summer">Summer</option>
                                    </select>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12">
                        <label class="d-block">
                            Please provide a realistic estimate of the number of players in your program
                            <div class="row">
                                <div class="col-12 col-md-4 col-lg-3">
                                    <select name="num-players" class="form-control form-control-lg"
                                        required>
                                        <option value="">-</option>
                                        <option value="Less than 36">Less than 36</option>
                                        <option value="36-72">36-72</option>
                                        <option value="More than 72">More than 72</option>
                                    </select>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12">
                        <label class="d-block">
                            Please provide a realistic estimate of the number of volunteers you will have
                            <div id="number-volunteers-suggestion-phrase" class="d-none">
                                <strong>(We recommend <span id="number-volunteers-suggestion"></span>)</strong>
                            </div>
                            <div class="row">
                                <div class="col-12 col-md-4 col-lg-3">
                                    <select name="num-volunteers" class="form-control form-control-lg"
                                        required>
                                        <option value="">-</option>
                                        <option value="8">8</option>
                                        <option value="8-10">8-10</option>
                                        <option value="10-12">10-12</option>
                                        <option value="12-15">12-15</option>
                                        <option value="More than 15">More than 15</option>
                                    </select>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-8">
                        <h2>Comments</h2>
                        <textarea name="comment" rows="4" class="form-control form-control-lg" maxlength="2500"></textarea>
                    </div>
                </div>
                <div class="row mt-4 mb-5">
                    <div class="col-md-8 col-lg-5">
                        <button type="submit" class="btn btn-lg px-5" style="background-color: #f66733; color: white;">Register My Organization</button>
                        <!-- TODO: make bootstrap-like classes for my orange button colors & use those instead of inline styles -->
                    </div>
                </div>
            </form>
        </div>
    </main>
    <footer class="footer bg-dark text-light py-4 px-3 py-sm-5 px-sm-5">
        &copy; 2018 Breakaway Sports Ministries
        <address>Greenville, SC</address>
        <a href="https://www.facebook.com/Breakaway-Sports-Ministries-81378962634/" target="_blank">
            <img src="images/fb.png" alt="Facebook" width="40" height="40" />
        </a>
    </footer>
    <script src="script.js"></script>
    <script src="validate_form.js" async></script>
    <script>
        const facilities_details_container = document.getElementById('facilities-details');
        const have_facilities_question = document.querySelector('.have-facilities-question');
        have_facilities_question.addEventListener('change', function(event) {
            const selected_option = document.querySelector('[name="have-facilities"]:checked');
            if (selected_option === null || selected_option.value === 'No') {
                facilities_details_container.classList.add('d-none');
                // TODO: remove all validation options that would mess up submitting if this section was hidden
            }
            else {
                facilities_details_container.classList.remove('d-none');
                // TODO: mark all fields with appropriate validation options
            }
        }, false);

        const custom_validators = {
            'validate_facility_photos': function(field) {
                // return null if valid, return an error string if there's an error.
                // TODO: Validate that the file extension matches jpg, jpeg, or png
                // TODO: check that individual file sizes are under 3MB, total should be less than 20MB
                // https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file
            }
        };

        const suggested_volunteers_for_players = {
            'Less than 36': 'at least 8',
            '36-72': '10-15',
            'More than 72': '15 or more'
        };
        const number_players_input = document.querySelector('[name="num-players"]');
        const number_volunteers = document.querySelector('[name="num-volunteers"]');
        const number_volunteers_suggestion_phrase = document.getElementById('number-volunteers-suggestion-phrase');
        const number_volunteers_suggestion = document.getElementById('number-volunteers-suggestion');
        number_players_input.addEventListener('change', function(event) {
            const number_players = number_players_input.value;
            if (number_players === '') {
                number_volunteers_suggestion_phrase.classList.add('d-none');
            }
            else {
                number_volunteers_suggestion_phrase.classList.remove('d-none');
                number_volunteers_suggestion.innerText = suggested_volunteers_for_players[number_players];
            }
        }, false);

        // TODO: character counters for the text areas on this page (write a reusable script that will do this based on an opt-in class and the maxlength property)
    </script>
</body>
</html>